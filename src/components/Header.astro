---
import { Package } from 'lucide-react';
import LanguageSwitcher from '@components/LanguageSwitcher.astro';
import { getLangFromUrl, useTranslations } from '@i18n/utils';

const { currentPathname } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Helper function to create localized URLs
function localizeUrl(path: string): string {
  if (lang === 'en') return path;
  return `/es${path}`;
}
---

<header class="sticky top-0 z-50 w-full border-b border-slate-200 bg-white/95 backdrop-blur-md shadow-sm">
  <nav class="container mx-auto flex h-20 items-center justify-between px-4 sm:px-6 lg:px-8">
    <!-- Logo -->
    <div class="flex items-center">
      <a href={localizeUrl('/')} class="flex items-center space-x-3 group">
        <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-linear-to-br from-red-600 to-rose-600 group-hover:scale-110 transition-transform">
          <Package className="w-6 h-6 text-white" />
        </div>
        <span class="text-2xl font-bold bg-linear-to-r from-red-800 to-rose-600 bg-clip-text text-transparent">
          AstroFlow
        </span>
      </a>
    </div>

    <!-- Language Switcher & CTA -->
    <div class="flex lg:flex items-center space-x-4">
      <LanguageSwitcher />
      <a
        href="#contact"
        class="inline-flex items-center px-6 py-2.5 text-sm font-semibold text-white bg-linear-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 rounded-lg shadow-md hover:shadow-lg transition-all"
      >
        {t('header.requestQuote')}
      </a>
    </div>
  </nav>
</header>
